(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))s(t);new MutationObserver(t=>{for(const a of t)if(a.type==="childList")for(const r of a.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function n(t){const a={};return t.integrity&&(a.integrity=t.integrity),t.referrerPolicy&&(a.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?a.credentials="include":t.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(t){if(t.ep)return;t.ep=!0;const a=n(t);fetch(t.href,a)}})();class c{static instance;images;constructor(){this.images=new Map}static getInstance(){return c.instance||(c.instance=new c),c.instance}loadImage(e){return new Promise((n,s)=>{if(this.images.has(e)){n(this.images.get(e));return}const t=new Image;t.onload=()=>{this.images.set(e,t),n(t)},t.onerror=s,t.src=e})}async getImage(e){return this.images.has(e)||await this.loadImage(e),this.images.get(e)}}class T{x;y;width;height;color;speed;image;constructor(e,n,s,t,a,r){this.x=e,this.y=n,this.width=s,this.height=t,this.color=a,this.speed=r,this.image=new Image}draw(e){c.getInstance().getImage("/games/game1/assets/images/alien1.jpg").then(n=>{n&&e.drawImage(n,this.x,this.y,this.width,this.height)})}update(e){this.y+=this.speed*e/1e3}}class M{x;y;vx;vy;length;color;constructor(e,n,s,t,a,r){this.x=e,this.y=n,this.vx=s,this.vy=t,this.length=a,this.color=r}draw(e){e.beginPath(),e.fillStyle=this.color,e.arc(this.x,this.y,this.length/2,0,Math.PI*2),e.fill(),e.closePath()}update(e){this.y+=this.vy*e/1e3}}class O{x;y;width;height;displayEndTime;shouldDisplay=!0;constructor(e,n,s,t,a){this.x=e,this.y=n,this.width=s,this.height=t,this.displayEndTime=a}draw(e){this.shouldDisplay&&c.getInstance().getImage("/games/game1/assets/images/explosion.jpg").then(n=>{n&&e.drawImage(n,this.x,this.y,this.width,this.height)})}update(e){e>=this.displayEndTime&&(this.shouldDisplay=!1)}}class L{x;y;width;height;color;speed;currentSpeed;constructor(e,n,s,t,a,r){this.x=e,this.y=n,this.width=s,this.height=t,this.color=a,this.speed=r,this.currentSpeed=0}draw(e){e.beginPath(),e.moveTo(this.x-this.width/2,this.y+this.height/3),e.lineTo(this.x,this.y-this.height/3*2),e.lineTo(this.x+this.width/2,this.y+this.height/3),e.closePath(),e.strokeStyle=this.color,e.stroke(),e.fillStyle=this.color,e.fill()}update(e,n){let s=this.x;this.x+=this.currentSpeed*e/1e3,(this.x>n.canvas.width-this.width/2||this.x<this.width/2)&&(this.x=s)}}class d{static instance;soundToAudioBufferMap;audioContext;constructor(e){this.audioContext=e,this.soundToAudioBufferMap=new Map}static getInstance(e){return d.instance||(d.instance=new d(e)),d.instance}loadSoundPool(e){return new Promise((n,s)=>{this.soundToAudioBufferMap.has(e)?n(this.soundToAudioBufferMap.get(e)):fetch(e).then(t=>t.arrayBuffer()).then(t=>{this.audioContext.decodeAudioData(t).then(a=>{this.soundToAudioBufferMap.set(e,a),n(a)})}).catch(s)})}async getAudioBufferSource(e){const n=await this.loadSoundPool(e),s=this.audioContext.createBufferSource();return s.buffer=n,s.connect(this.audioContext.destination),s}}let o,l=[],h=[],f=-1,D=1,k=5,b=5,E=0,I=0,p=0,g=0,w=[],y=800,A=!1,u=!1,m=!1;const x=new(window.AudioContext||window.webkitAudioContext);function F(){const i=document.getElementById("gameCanvas");if(!i){console.error("Canvas element not found!");return}const e=i.getContext("2d");if(!e){console.error("Failed to get 2D context!");return}i.width=window.innerWidth,i.height=window.innerHeight,e.fillStyle="black",e.fillRect(0,0,i.width,i.height),o=new L(i.width/2,i.height-50,50,50,"blue",150),o.draw(e),y=Math.min(y,i.width);let n=Date.now()%(i.width-50);console.log(n);let s=new T(n,0,50,50,"green",100);h.push(s)}window.onload=()=>{F()};let v=!1;document.addEventListener("touchstart",()=>{m=!0,A&&!u&&(l.push(new M(o.x,o.y-o.height/3*2,0,-500,5,"yellow")),B())});function q(){v||(typeof window.DeviceOrientationEvent.requestPermission=="function"?window.DeviceOrientationEvent?.requestPermission().then(i=>{i==="granted"?(v=!0,window.addEventListener("deviceorientation",P)):alert("Permission denied.")}).catch(i=>console.error("Permission error 123:",i)):(window.addEventListener("deviceorientation",P),v=!0))}function P(i){const e=i.gamma??0;e<-2?o.currentSpeed=-1*Math.abs(o.speed):e>2?o.currentSpeed=Math.abs(o.speed):o.currentSpeed=0}document.addEventListener("keydown",i=>{if(o)switch(i.key){case"ArrowLeft":o.currentSpeed=-1*Math.abs(o.speed);break;case"ArrowRight":o.currentSpeed=Math.abs(o.speed);break;case" ":case"Spacebar":case"ArrowUp":l.push(new M(o.x,o.y-o.height/3*2,0,-500,5,"yellow")),B();break}});document.addEventListener("keyup",i=>{if(o)switch(i.key){case"ArrowLeft":case"ArrowRight":o.currentSpeed=0;break}});function S(i){if($())return;if(g=Number(((1+i)/1e3).toFixed(2)),b=Math.max(k-g/10,1),f==-1){f=i,requestAnimationFrame(S);return}let e=i-f;f=i;const n=document.getElementById("gameCanvas");if(!n)return;const s=n.getContext("2d");s&&(s.clearRect(0,0,n.width,n.height),s.fillStyle="black",s.fillRect(0,0,n.width,n.height),o.update(e,s),o.draw(s),l.forEach(t=>{t.update(e),t.draw(s)}),l=l.filter(t=>t.y+t.length>0),G(e,s),requestAnimationFrame(S),s.fillStyle="white",s.font="20px Arial",s.fillText(`Kills: ${I}`,10,30),s.fillText(`Missed: ${p}`,10,60),s.fillText(`Time: ${g.toFixed(0)} s`,10,90))}function G(i,e){if(h.forEach(t=>{t.update(i)}),f-E>b*1e3){E=f;const t=Math.max(0,(e.canvas.width-y)/2);for(let a=0;a<D;a++){let r=t+Math.floor(Date.now()*Math.random())%(y-50),C=new T(r,0,50,50,"green",100);h.push(C)}}let n=h.length;h=h.filter(t=>t.y<e.canvas.height),p+=n-h.length;let s=[];h.forEach(t=>{let a=[];l.forEach(r=>{if(r.x>=t.x&&r.x<=t.x+t.width&&r.y<=t.y+t.height&&r.y>t.y){s.push(t),a.push(r),I+=1,R(),w.push(new O(t.x,t.y,t.width,t.height,g*1e3+100));return}}),l=l.filter(r=>!a.includes(r)),a=[]}),h=h.filter(t=>!s.includes(t)),w=w.filter(t=>t.shouldDisplay),w.forEach(t=>{t.update(g*1e3),t.draw(e)}),s=[],h.forEach(t=>{t.draw(e)})}function B(){d.getInstance(x).getAudioBufferSource("/games/game1//assets/sounds/laser-gun-shot.wav").then(i=>{i?.start()})}function R(){d.getInstance(x).getAudioBufferSource("/games/game1/assets/sounds/alien-explosion.wav").then(i=>{i?.start()})}function $(){if(u)return!0;if(h.forEach(i=>{if(i.y+i.height>=o.y-o.height/3*2&&i.x+i.width>=o.x-o.width/2&&i.x<=o.x+o.width/2){u=!0;return}}),u=u||p>=10,u){const i=document.getElementById("gameCanvas");if(!i)return;const e=i.getContext("2d");if(!e)return;e.fillStyle="rgba(0, 0, 0, 0.5)",e.fillRect(0,0,i.width,i.height),e.fillStyle="white",e.font="50px Arial",e.fillText("Game Over",i.width/2-100,i.height/2),e.font="30px Arial",e.fillText(`Kills: ${I}`,i.width/2-70,i.height/2+50),e.fillText(`Missed: ${p}`,i.width/2-70,i.height/2+90),e.fillText(`Time: ${g.toFixed(0)} s`,i.width/2-70,i.height/2+130)}return u}function N(){let i=document.getElementById("game-start-button");A||(A=!0,i&&(i.style.display="none"),X(),m=m||/Mobi|Android|iPhone|iPad|iPod/i.test(navigator.userAgent),m?q():o.speed=300,requestAnimationFrame(S))}function X(){const i=document.getElementById("gameCanvas");i&&(i.style.display="block")}d.getInstance(x).loadSoundPool("/games/game1/assets/sounds/laser-gun-shot.wav");d.getInstance(x).loadSoundPool("/games/game1/assets/sounds/alien-explosion.wav");window.startGame=N;
